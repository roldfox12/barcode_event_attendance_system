{% extends 'base.html' %}
{% block content %}
<h2>All Students</h2>

<!-- Search Form -->
<form method="get" action="" style="margin-bottom: 20px; display: flex; gap: 8px; align-items: center;">
    <input type="text" name="q" placeholder="Search by ID or name..." value="{{ request.GET.q|default_if_none:'' }}" style="padding:8px; border-radius:6px; border:1px solid #e6007a; width: 250px;">
    <button type="submit" style="background:#e6007a; color:#fff; border:none; padding:8px 18px; border-radius:6px; cursor:pointer;">Search</button>
    {% if request.GET.q %}
        <a href="{% url 'students_list' %}" style="margin-left:8px; color:#e6007a; text-decoration:underline;">Clear</a>
    {% endif %}
</form>

<table style="width:100%; border-collapse:collapse; background:#fff;">
    <thead>
        <tr style="background:#ffe3f0;">
            <th style="padding:8px; border:1px solid #e6007a;">ID Number</th>
            <th style="padding:8px; border:1px solid #e6007a;">Student Name</th>
            <th style="padding:8px; border:1px solid #e6007a;">Action</th>
        </tr>
    </thead>
    <tbody>
        {% for student in students %}
        <!-- Example for students_list.html -->
<tr>
    <td style="padding:8px; border:1px solid #e6007a; vertical-align: middle;">{{ student.barcode_id }}</td>
    <td style="padding:8px; border:1px solid #e6007a; vertical-align: middle;">{{ student.name }}</td>
    <td style="padding:8px; border:1px solid #e6007a; vertical-align: middle;">
        <div style="display: flex; gap: 10px; align-items: center;">
            <a href="{% url 'edit_student' student.id %}">
                <button type="button" style="background:#fff; color:#e6007a; border:2px solid #e6007a; padding:6px 14px; border-radius:4px; cursor:pointer;">Edit</button>
            </a>
            <form method="post" action="{% url 'delete_student' student.id %}" style="display:inline; margin:0;">
                {% csrf_token %}
                <button type="submit" style="background:#fff; color:#e6007a; border:2px solid #e6007a; padding:6px 14px; border-radius:4px; cursor:pointer;"
                    onclick="return confirm('Are you sure you want to delete this student?');">
                    Delete
                </button>
            </form>
        </div>
    </td>
</tr>
        {% endfor %}
    </tbody>
</table>
<a href="{% url 'dashboard' %}">
    <button type="button" style="background:#e6007a; color:#fff; border:2px solid #e6007a; padding:8px 18px; border-radius:6px; cursor:pointer; margin-top:20px;">
        Back to Dashboard
    </button>
</a>
{% endblock %}