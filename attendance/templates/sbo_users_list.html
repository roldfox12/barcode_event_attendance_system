{% extends 'base.html' %}
{% block content %}
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 18px;">
    <h2 style="margin: 0;">SBO Officers</h2>
</div>

<!-- Search Form with Delete All Button (side by side) -->
<div style="margin-bottom: 20px; display: flex; gap: 8px; align-items: center;">
    <form method="get" action="" style="display: flex; gap: 8px; align-items: center; margin: 0;">
        <input type="text" name="q" placeholder="Search username..." value="{{ request.GET.q|default_if_none:'' }}" style="padding:8px; border-radius:6px; border:1px solid #e6007a; width: 250px;">
        <button type="submit" style="background:#e6007a; color:#fff; border:none; padding:8px 18px; border-radius:6px; cursor:pointer;">Search</button>
        {% if request.GET.q %}
        <a href="{% url 'sbo_users_list' %}" style="margin-left:8px; color:#e6007a; text-decoration:underline;">Clear</a>
        {% endif %}
    </form>
    <form method="post" action="{% url 'delete_all_sbo_users' %}" style="margin: 0;">
        {% csrf_token %}
        <button type="submit" style="background:#fff; color:#e6007a; border:2px solid #e6007a; padding:6px 18px; border-radius:4px; cursor:pointer; font-weight:600;"
            onclick="return confirm('Are you sure you want to delete ALL SBO users? This cannot be undone.');">
            Delete All
        </button>
    </form>
</div>

<table style="width:100%; border-collapse:collapse; background:#fff;">
    <thead>
        <tr style="background:#ffe3f0;">
            <th style="padding:8px; border:1px solid #e6007a;">Username</th>
            <th style="padding:8px; border:1px solid #e6007a;">Actions</th>
        </tr>
    </thead>
    <tbody>
        {% for user in sbo_users %}
        <tr>
            <td style="padding:8px; border:1px solid #e6007a; vertical-align: middle;">{{ user.username }}</td>
            <td style="padding:8px; border:1px solid #e6007a; vertical-align: middle;">
                <div style="display: flex; gap: 10px; align-items: center; height: 100%;">
                    <a href="{% url 'edit_sbo_user' user.id %}" style="display: flex; align-items: center;">
                        <button type="button" style="background:#fff; color:#e6007a; border:2px solid #e6007a; padding:6px 18px; border-radius:4px; cursor:pointer; margin:0;">Edit</button>
                    </a>
                    <form method="post" action="{% url 'delete_sbo_user' user.id %}" style="display:flex; align-items: center; margin:0;">
                        {% csrf_token %}
                        <button type="submit" style="background:#fff; color:#e6007a; border:2px solid #e6007a; padding:6px 18px; border-radius:4px; cursor:pointer; margin:0;"
                            onclick="return confirm('Are you sure you want to delete this SBO user?');">
                            Delete
                        </button>
                    </form>
                </div>
            </td>
        </tr>
        {% empty %}
        <tr>
            <td colspan="2" style="padding:8px; border:1px solid #e6007a;">No SBO users found.</td>
        </tr>
        {% endfor %}
    </tbody>
</table>
<a href="{% url 'dashboard' %}">
    <button type="button" style="background:#e6007a; color:#fff; border:2px solid #e6007a; padding:8px 18px; border-radius:6px; cursor:pointer; margin-top:20px;">
        Back to Dashboard
    </button>
</a>
{% endblock %}